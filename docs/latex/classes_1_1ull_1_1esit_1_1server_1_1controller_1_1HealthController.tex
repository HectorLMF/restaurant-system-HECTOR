\doxysection{es.\+ull.\+esit.\+server.\+controller.\+Health\+Controller Class Reference}
\hypertarget{classes_1_1ull_1_1esit_1_1server_1_1controller_1_1HealthController}{}\label{classes_1_1ull_1_1esit_1_1server_1_1controller_1_1HealthController}\index{es.ull.esit.server.controller.HealthController@{es.ull.esit.server.controller.HealthController}}


REST controller for health and database connectivity checks.  




Collaboration diagram for es.\+ull.\+esit.\+server.\+controller.\+Health\+Controller\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=223pt]{classes_1_1ull_1_1esit_1_1server_1_1controller_1_1HealthController__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
Response\+Entity$<$ Map$<$ String, Object $>$ $>$ \mbox{\hyperlink{classes_1_1ull_1_1esit_1_1server_1_1controller_1_1HealthController_a8bccdc869b8f33c8016f91ab584812ca}{health}} ()
\begin{DoxyCompactList}\small\item\em Basic health endpoint. \end{DoxyCompactList}\item 
Response\+Entity$<$ Map$<$ String, Object $>$ $>$ \mbox{\hyperlink{classes_1_1ull_1_1esit_1_1server_1_1controller_1_1HealthController_a15e753c0428335d9206b9defc2efc20a}{check\+Database}} ()
\begin{DoxyCompactList}\small\item\em Database connectivity check. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
Data\+Source \mbox{\hyperlink{classes_1_1ull_1_1esit_1_1server_1_1controller_1_1HealthController_a426cd7d61e7495000d723597a0efd638}{data\+Source}}
\begin{DoxyCompactList}\small\item\em Data\+Source used to verify connectivity with the database. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
REST controller for health and database connectivity checks. 

\begin{DoxyVerb}   Exposes simple diagnostic endpoints to:
   - receive basic service liveness information.
   - check connectivity with the underlying database.
   Not required by the Swing frontend but are very
   useful for debugging, monitoring or for external tools that need to
   verify that the service and the database are up and running.
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{HealthController_8java_source_l00027}{27}} of file \mbox{\hyperlink{HealthController_8java_source}{Health\+Controller.\+java}}.



\label{doc-func-members}
\Hypertarget{classes_1_1ull_1_1esit_1_1server_1_1controller_1_1HealthController_doc-func-members}
\doxysubsection{Member Function Documentation}
\Hypertarget{classes_1_1ull_1_1esit_1_1server_1_1controller_1_1HealthController_a15e753c0428335d9206b9defc2efc20a}\index{es.ull.esit.server.controller.HealthController@{es.ull.esit.server.controller.HealthController}!checkDatabase@{checkDatabase}}
\index{checkDatabase@{checkDatabase}!es.ull.esit.server.controller.HealthController@{es.ull.esit.server.controller.HealthController}}
\doxysubsubsection{\texorpdfstring{checkDatabase()}{checkDatabase()}}
{\footnotesize\ttfamily \label{classes_1_1ull_1_1esit_1_1server_1_1controller_1_1HealthController_a15e753c0428335d9206b9defc2efc20a} 
Response\+Entity$<$ Map$<$ String, Object $>$ $>$ es.\+ull.\+esit.\+server.\+controller.\+Health\+Controller.\+check\+Database (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Database connectivity check. 

\begin{DoxyVerb}   Endpoint: GET /api/db-check

   Tries to obtain a JDBC connection from the configured DataSource
   and verifies that it is valid. If the connection is valid, information
   about the database catalog and URL is included in the response.

   On success:
   - HTTP 200 with JSON fields "status" = "UP" and "database" =
   "Connected".

   On failure:
   - HTTP 503 (SERVICE_UNAVAILABLE) with "status" = "DOWN" and an
   additional "error" message describing the issue.
\end{DoxyVerb}


\begin{DoxyReturn}{Returns}
\mbox{[}Response\+Entity$<$\+Map$<$\+String, Object$>$$>$\mbox{]} Database connectivity status\+: HTTP 200 if connected, HTTP 503 otherwise. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{HealthController_8java_source_l00073}{73}} of file \mbox{\hyperlink{HealthController_8java_source}{Health\+Controller.\+java}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00074\ \ \ \ \ Map<String,\ Object>\ response\ =\ \textcolor{keyword}{new}\ HashMap<>();}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordflow}{try}\ (Connection\ conn\ =\ dataSource.getConnection())\ \{}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \textcolor{keywordtype}{boolean}\ isValid\ =\ conn.isValid(2);}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (isValid)\ \{}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ response.put(\textcolor{stringliteral}{"{}status"{}},\ \textcolor{stringliteral}{"{}UP"{}});}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ response.put(\textcolor{stringliteral}{"{}database"{}},\ \textcolor{stringliteral}{"{}Connected"{}});}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ response.put(\textcolor{stringliteral}{"{}catalog"{}},\ conn.getCatalog());}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ response.put(\textcolor{stringliteral}{"{}url"{}},\ conn.getMetaData().getURL());}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ response.put(\textcolor{stringliteral}{"{}timestamp"{}},\ System.currentTimeMillis());}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ResponseEntity.ok(response);}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ response.put(\textcolor{stringliteral}{"{}status"{}},\ \textcolor{stringliteral}{"{}DOWN"{}});}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ response.put(\textcolor{stringliteral}{"{}database"{}},\ \textcolor{stringliteral}{"{}Connection\ not\ valid"{}});}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ResponseEntity.status(HttpStatus.SERVICE\_UNAVAILABLE).body(response);}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00091\ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (Exception\ e)\ \{}
\DoxyCodeLine{00092\ \ \ \ \ \ \ response.put(\textcolor{stringliteral}{"{}status"{}},\ \textcolor{stringliteral}{"{}DOWN"{}});}
\DoxyCodeLine{00093\ \ \ \ \ \ \ response.put(\textcolor{stringliteral}{"{}database"{}},\ \textcolor{stringliteral}{"{}Connection\ failed"{}});}
\DoxyCodeLine{00094\ \ \ \ \ \ \ response.put(\textcolor{stringliteral}{"{}error"{}},\ e.getMessage());}
\DoxyCodeLine{00095\ \ \ \ \ \ \ response.put(\textcolor{stringliteral}{"{}timestamp"{}},\ System.currentTimeMillis());}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ResponseEntity.status(HttpStatus.SERVICE\_UNAVAILABLE).body(response);}
\DoxyCodeLine{00097\ \ \ \ \ \}}
\DoxyCodeLine{00098\ \ \ \}}

\end{DoxyCode}


References \mbox{\hyperlink{HealthController_8java_source_l00073}{check\+Database()}}, and \mbox{\hyperlink{HealthController_8java_source_l00031}{data\+Source}}.



Referenced by \mbox{\hyperlink{HealthController_8java_source_l00073}{check\+Database()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=254pt]{classes_1_1ull_1_1esit_1_1server_1_1controller_1_1HealthController_a15e753c0428335d9206b9defc2efc20a_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=254pt]{classes_1_1ull_1_1esit_1_1server_1_1controller_1_1HealthController_a15e753c0428335d9206b9defc2efc20a_icgraph}
\end{center}
\end{figure}
\Hypertarget{classes_1_1ull_1_1esit_1_1server_1_1controller_1_1HealthController_a8bccdc869b8f33c8016f91ab584812ca}\index{es.ull.esit.server.controller.HealthController@{es.ull.esit.server.controller.HealthController}!health@{health}}
\index{health@{health}!es.ull.esit.server.controller.HealthController@{es.ull.esit.server.controller.HealthController}}
\doxysubsubsection{\texorpdfstring{health()}{health()}}
{\footnotesize\ttfamily \label{classes_1_1ull_1_1esit_1_1server_1_1controller_1_1HealthController_a8bccdc869b8f33c8016f91ab584812ca} 
Response\+Entity$<$ Map$<$ String, Object $>$ $>$ es.\+ull.\+esit.\+server.\+controller.\+Health\+Controller.\+health (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Basic health endpoint. 

\begin{DoxyVerb}   Endpoint: GET /api/health

   Returns a small JSON payload indicating that the service is up,
   together with a timestamp and a human-readable service name.
\end{DoxyVerb}


\begin{DoxyReturn}{Returns}
\mbox{[}Response\+Entity$<$\+Map$<$\+String, Object$>$$>$\mbox{]} Health status with HTTP 200. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{HealthController_8java_source_l00044}{44}} of file \mbox{\hyperlink{HealthController_8java_source}{Health\+Controller.\+java}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00045\ \ \ \ \ Map<String,\ Object>\ response\ =\ \textcolor{keyword}{new}\ HashMap<>();}
\DoxyCodeLine{00046\ \ \ \ \ response.put(\textcolor{stringliteral}{"{}status"{}},\ \textcolor{stringliteral}{"{}UP"{}});}
\DoxyCodeLine{00047\ \ \ \ \ response.put(\textcolor{stringliteral}{"{}timestamp"{}},\ System.currentTimeMillis());}
\DoxyCodeLine{00048\ \ \ \ \ response.put(\textcolor{stringliteral}{"{}service"{}},\ \textcolor{stringliteral}{"{}Restaurant\ Server"{}});}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordflow}{return}\ ResponseEntity.ok(response);}
\DoxyCodeLine{00050\ \ \ \}}

\end{DoxyCode}


References \mbox{\hyperlink{HealthController_8java_source_l00044}{health()}}.



Referenced by \mbox{\hyperlink{HealthController_8java_source_l00044}{health()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=229pt]{classes_1_1ull_1_1esit_1_1server_1_1controller_1_1HealthController_a8bccdc869b8f33c8016f91ab584812ca_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=229pt]{classes_1_1ull_1_1esit_1_1server_1_1controller_1_1HealthController_a8bccdc869b8f33c8016f91ab584812ca_icgraph}
\end{center}
\end{figure}


\label{doc-variable-members}
\Hypertarget{classes_1_1ull_1_1esit_1_1server_1_1controller_1_1HealthController_doc-variable-members}
\doxysubsection{Member Data Documentation}
\Hypertarget{classes_1_1ull_1_1esit_1_1server_1_1controller_1_1HealthController_a426cd7d61e7495000d723597a0efd638}\index{es.ull.esit.server.controller.HealthController@{es.ull.esit.server.controller.HealthController}!dataSource@{dataSource}}
\index{dataSource@{dataSource}!es.ull.esit.server.controller.HealthController@{es.ull.esit.server.controller.HealthController}}
\doxysubsubsection{\texorpdfstring{dataSource}{dataSource}}
{\footnotesize\ttfamily \label{classes_1_1ull_1_1esit_1_1server_1_1controller_1_1HealthController_a426cd7d61e7495000d723597a0efd638} 
Data\+Source es.\+ull.\+esit.\+server.\+controller.\+Health\+Controller.\+data\+Source\hspace{0.3cm}{\ttfamily [private]}}



Data\+Source used to verify connectivity with the database. 



Definition at line \mbox{\hyperlink{HealthController_8java_source_l00031}{31}} of file \mbox{\hyperlink{HealthController_8java_source}{Health\+Controller.\+java}}.



Referenced by \mbox{\hyperlink{HealthController_8java_source_l00073}{check\+Database()}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{HealthController_8java}{Health\+Controller.\+java}}\end{DoxyCompactItemize}
